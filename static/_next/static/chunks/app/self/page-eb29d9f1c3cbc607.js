(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{85229:function(e,t,n){Promise.resolve().then(n.bind(n,82039))},82039:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(57437),i=n(43555),o=n.n(i),s=n(2265),c=n(80881),_=n(22649),r=n(52269);async function l(e,t){let n=await fetch(_.Y+"/coc_self_add_pc",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({id:t,data:e})});return(await n.json()).ok}async function d(e,t){let n=await fetch(_.Y+"/coc_self_del_pc",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({id:t,card_id:e})});return(await n.json()).ok}async function p(e,t){let n=await fetch(_.Y+"/coc_self_update",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({card_id:t,data:e})});return(await n.json()).ok}function g(){let[e,t]=(0,s.useState)(999),[n,i]=(0,s.useState)(10),[g,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[f,x]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[k,b]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)(),v=async e=>{let t=await fetch(_.Y+"/coc_self_get_pc",{method:"post",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({id:e})}),n=(await t.json()).data;0===n.length||S(n)};(0,s.useEffect)(()=>{let e=window.location.search.split("?")[1];var t=e?e.split("&"):[],n={};for(let e=0;e<t.length;e++){let a=t[e].split("=");n[a[0]]=a[1]}v(n.user),u(n.user)},[]);let F=e=>{l(e,g).then(e=>{e&&c.u_.alert({content:"已成功提交！",onConfirm(){v(g),x(!1)}})})},T=e=>{c.Vq.confirm({content:"确认删除？",onConfirm:async()=>{d(e,g).then(e=>{e&&(c.FN.show({icon:"success",content:"删除成功",position:"bottom"}),v(g))})}})},O=e=>{p(e,h).then(e=>{e&&c.u_.alert({content:"已更新",onConfirm(){v(g),m("")}})})};function L(){return(0,a.jsxs)("div",{className:o().mainbg,children:[(0,a.jsxs)("div",{className:o().cardbg,children:[(0,a.jsx)("div",{className:o().title,children:"我的角色卡"}),C?C.map((e,t)=>(0,a.jsxs)("div",{className:o().onecard,style:{backgroundColor:e.group?"lightgoldenrodyellow":"white"},children:[(0,a.jsxs)("div",{className:o().cardLeft,children:[e.group?(0,a.jsxs)("text",{children:["来自群：",e.group]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{children:["[",e.info.time?e.info.time:"年代未知"," / ",e.info.wherelive?e.info.wherelive:"居住地未知","]"]}),(0,a.jsxs)("div",{children:[e.name," - ",e["职业"]," - ",2==e.info.sex?"女":"男"]})]}),(0,a.jsxs)("div",{className:o().cardRight,children:[(0,a.jsx)(c.zx,{color:"success",onClick:()=>m(e._id),children:"编辑"}),(0,a.jsx)(c.zx,{color:"danger",onClick:()=>T(e._id),style:{marginLeft:8},children:"删除"})]})]},t)):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)("div",{children:(0,a.jsx)(c.zx,{block:!0,color:"success",size:"large",onClick:()=>{x(!0)},children:"新建角色卡"})})]})}return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(function(){return(0,a.jsx)(a.Fragment,{children:f?(0,a.jsx)(r.Z,{pointatt:e,atttime:n,hero:-1,pcid:"",completeFun:F}):h?(0,a.jsx)(r.Z,{pointatt:e,atttime:n,pcid:h,completeFun:O}):(0,a.jsx)(L,{})})},{})})}},43555:function(e){e.exports={container:"page_container__zbTN5",skillmain:"page_skillmain__9md1v",skillCount:"page_skillCount__RuSJx",skilltitle:"page_skilltitle__j0gI0",skilltext:"page_skilltext__3Jgr7",skillinput:"page_skillinput__jl0bX",skillcant:"page_skillcant__xCGPf",griditem:"page_griditem__Hma7y",weaponCon:"page_weaponCon__NdDXq",weaponOne:"page_weaponOne__Goh6g",weaponDel:"page_weaponDel__j8Zib",weaponName:"page_weaponName__cw4ii",weaponValue:"page_weaponValue__q2QGu",cardbg:"page_cardbg__D1NuL",onecard:"page_onecard__ECLq_",cardLeft:"page_cardLeft__TpfVz",cardRight:"page_cardRight__nFwsK",mainbg:"page_mainbg__yP7Rh",mainbg2:"page_mainbg2__KeR5Z",cardbg2:"page_cardbg2__8yutN",newtemtext:"page_newtemtext__ZwN5B",title:"page_title__Mg0nS",main:"page_main__A2DF4",description:"page_description__u2bZ9",code:"page_code__4mwcr",grid:"page_grid__rwbz0",card:"page_card__dh5Y8",center:"page_center__YwcWp",logo:"page_logo__XPdmn",content:"page_content__S6rgn",vercelLogo:"page_vercelLogo__H4Hk5",rotate:"page_rotate__s6Vhk"}}},function(e){e.O(0,[740,881,11,269,971,69,744],function(){return e(e.s=85229)}),_N_E=e.O()}]);