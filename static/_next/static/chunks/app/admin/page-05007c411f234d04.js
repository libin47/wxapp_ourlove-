(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3666:function(e,t,n){Promise.resolve().then(n.bind(n,679))},679:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),i=n(2265),l=n(9449),s=n(6196),r=n(6905);function o(){let[e,t]=(0,i.useState)([]),[n,o]=(0,i.useState)([]),[d,c]=(0,i.useState)("");async function u(e){let n=await fetch("/api/get_all_user",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({group:e})}),a=(await n.json()).data;var i=[];for(var l in a)if(["Gaming","status","_id"].indexOf(l)>=0);else{var s=a[l];s.wxid=l,i.push(s)}console.log(i),t(i)}async function f(e){let t=await fetch("/api/coc_update_user",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(e)});(await t.json()).ok&&alert("成功提交")}(0,i.useEffect)(()=>{let e=window.location.search.split("?")[1];var t=e?e.split("&"):[],n={};for(let e=0;e<t.length;e++){let a=t[e].split("=");n[a[0]]=a[1]}let a=n.group;c(a),u(a)},[]);let h=function(t){console.log(t);var n=-1;for(let a=0;a<e.length;a++)if(e[a].wxid==t){n=a;break}n>=0&&f({group:d,wxid:t,HP:+e[n].HP,MP:+e[n].MP,SAN:+e[n].SAN})},x=function(n,a){console.log(e);var i="wxid"in a?a.wxid:"",l=-1;for(let t=0;t<e.length;t++)if(e[t].wxid==i){l=t;break}if(l>=0){for(let t in a)e[l][t]=a[t];t(e)}};return(0,a.jsxs)(a.Fragment,{children:["管理！",e.map((e,t)=>(0,a.jsx)("div",{style:{backgroundColor:"white",width:"30%",display:"flex"},children:(0,a.jsxs)(l.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600,width:"80%"},initialValues:{wxid:e.wxid,name:e.name,HP:e.HP,MP:e.MP,SAN:e.SAN},autoComplete:"off",onValuesChange:x,children:[(0,a.jsx)(l.Z.Item,{label:"wxid",name:"wxid",children:(0,a.jsx)(s.Z,{disabled:!0})}),(0,a.jsx)(l.Z.Item,{label:"name",name:"name",children:(0,a.jsx)(s.Z,{disabled:!0})}),(0,a.jsx)(l.Z.Item,{label:"HP("+e.HP_MAX+")",name:"HP",children:(0,a.jsx)(s.Z,{})}),(0,a.jsx)(l.Z.Item,{label:"MP("+e.MP_MAX+")",name:"MP",children:(0,a.jsx)(s.Z,{})}),(0,a.jsx)(l.Z.Item,{label:"SAN",name:"SAN",children:(0,a.jsx)(s.Z,{})}),(0,a.jsx)(l.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsx)(r.ZP,{type:"primary",htmlType:"submit",onClick:()=>h(e.wxid),children:"更新"})})]})},t))]})}}},function(e){e.O(0,[740,755,971,69,744],function(){return e(e.s=3666)}),_N_E=e.O()}]);