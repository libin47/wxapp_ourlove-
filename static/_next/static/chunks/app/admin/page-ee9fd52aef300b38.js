(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3666:function(e,t,a){Promise.resolve().then(a.bind(a,1114))},1114:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var l=a(7437),s=a(7296),n=a.n(s),i=a(2265),r=a(5056).Z,c=a(791).Z,o=a(4008),p=a(6196),d=a(6905),x=a(6480),h=a.n(x),m=a(5704);function f(e){return["small","middle","large"].includes(e)}var j=a(7499),u=a(6004),g=a(316);let y=["wrap","nowrap","wrap-reverse"],b=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],w=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],_=(e,t)=>{let a={};return y.forEach(l=>{a["".concat(e,"-wrap-").concat(l)]=t.wrap===l}),a},v=(e,t)=>{let a={};return w.forEach(l=>{a["".concat(e,"-align-").concat(l)]=t.align===l}),a["".concat(e,"-align-stretch")]=!t.align&&!!t.vertical,a},Z=(e,t)=>{let a={};return b.forEach(l=>{a["".concat(e,"-justify-").concat(l)]=t.justify===l}),a},N=e=>{let{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},O=e=>{let{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},P=e=>{let{componentCls:t}=e,a={};return y.forEach(e=>{a["".concat(t,"-wrap-").concat(e)]={flexWrap:e}}),a},k=e=>{let{componentCls:t}=e,a={};return w.forEach(e=>{a["".concat(t,"-align-").concat(e)]={alignItems:e}}),a},C=e=>{let{componentCls:t}=e,a={};return b.forEach(e=>{a["".concat(t,"-justify-").concat(e)]={justifyContent:e}}),a};var T=(0,u.I$)("Flex",e=>{let{paddingXS:t,padding:a,paddingLG:l}=e,s=(0,g.TS)(e,{flexGapSM:t,flexGap:a,flexGapLG:l});return[N(s),O(s),P(s),k(s),C(s)]},()=>({}),{resetStyle:!1}),I=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&0>t.indexOf(l)&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,l=Object.getOwnPropertySymbols(e);s<l.length;s++)0>t.indexOf(l[s])&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(a[l[s]]=e[l[s]]);return a};let S=i.forwardRef((e,t)=>{let{prefixCls:a,rootClassName:l,className:s,style:n,flex:r,gap:c,children:o,vertical:p=!1,component:d="div"}=e,x=I(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:u,direction:g,getPrefixCls:y}=i.useContext(j.E_),b=y("flex",a),[w,N,O]=T(b),P=null!=p?p:null==u?void 0:u.vertical,k=h()(s,l,null==u?void 0:u.className,b,N,O,h()(Object.assign(Object.assign(Object.assign({},_(b,e)),v(b,e)),Z(b,e))),{["".concat(b,"-rtl")]:"rtl"===g,["".concat(b,"-gap-").concat(c)]:f(c),["".concat(b,"-vertical")]:P}),C=Object.assign(Object.assign({},null==u?void 0:u.style),n);return r&&(C.flex=r),c&&!f(c)&&(C.gap=c),w(i.createElement(d,Object.assign({ref:t,className:k,style:C},(0,m.Z)(x,["justify","wrap","align"])),o))});var E=a(2649);function M(){let[e,t]=(0,i.useState)([]),[a,s]=(0,i.useState)([]),[x,h]=(0,i.useState)("");async function m(e){let a=await fetch(E.Y+"/get_all_user",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify({group:e})}),l=(await a.json()).data;var s=[];for(var n in l)if(["Gaming","status","_id"].indexOf(n)>=0);else{var i=l[n];i.wxid=n,s.push(i)}console.log(s),t(s)}async function f(e){let t=await fetch("/coc_update_user",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(e)});(await t.json()).ok&&alert("成功提交")}(0,i.useEffect)(()=>{let e=window.location.search.split("?")[1];var t=e?e.split("&"):[],a={};for(let e=0;e<t.length;e++){let l=t[e].split("=");a[l[0]]=l[1]}let l=a.group;h(l),m(l)},[]);let j=function(t){console.log(t);var a=-1;for(let l=0;l<e.length;l++)if(e[l].wxid==t){a=l;break}a>=0&&f({group:x,wxid:t,HP:+e[a].HP,MP:+e[a].MP,SAN:+e[a].SAN})},u=function(a,l){console.log(e);var s="wxid"in l?l.wxid:"",n=-1;for(let t=0;t<e.length;t++)if(e[t].wxid==s){n=t;break}if(n>=0){for(let t in l)e[n][t]=l[t];t(e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("head",{children:[" ",(0,l.jsx)("title",{children:"KP看板"})," "]}),(0,l.jsx)("div",{className:n().maintitle,children:"KP看板"}),e.map((e,t)=>(0,l.jsxs)(r,{style:{backgroundColor:"white",color:"black",borderBottom:"2px solid #000",display:"flex"},children:[(0,l.jsx)(c,{span:4,className:n().info,children:(0,l.jsx)("div",{children:(0,l.jsxs)(o.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600,width:"80%"},initialValues:{DB:e.DB,HP:e.HP,MP:e.MP,SAN:e.SAN,职业:e["职业"],sex:e.sex>1?"女":"男"},autoComplete:"off",onValuesChange:u,children:[(0,l.jsx)("div",{className:n().name,children:e.name}),(0,l.jsx)(o.Z.Item,{label:"HP("+e.HP_MAX+")",name:"HP",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"MP("+e.MP_MAX+")",name:"MP",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"SAN",name:"SAN",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"DB",name:"DB",style:{height:20,paddingTop:10},children:(0,l.jsx)(p.Z,{readOnly:!0})}),(0,l.jsx)(o.Z.Item,{label:"职业",name:"职业",style:{height:10},children:(0,l.jsx)(p.Z,{readOnly:!0})}),(0,l.jsx)(o.Z.Item,{label:"性别",name:"sex",style:{height:10},children:(0,l.jsx)(p.Z,{readOnly:!0})}),(0,l.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},style:{paddingTop:10},children:(0,l.jsx)(d.ZP,{type:"primary",htmlType:"submit",onClick:()=>j(e.wxid),children:"更新"})})]})},t)}),(0,l.jsxs)(c,{span:2,className:n().attribute,children:[(0,l.jsx)("div",{className:n().title,children:"属性"}),(0,l.jsx)(S,{wrap:"wrap",gap:"small",children:Object.keys(e.attribute).map(t=>(0,l.jsxs)("div",{className:n().attributeText,children:[t,": ",e.attribute[t]]},t))})]}),(0,l.jsxs)(c,{span:4,className:n().skill,children:[(0,l.jsx)("div",{className:n().title,children:"技能"}),(0,l.jsx)(S,{wrap:"wrap",gap:"small",children:Object.keys(e.skill).map(t=>(0,l.jsxs)("div",{className:n().skillText,children:[t,": ",e.skill[t]]},t))})]}),(0,l.jsxs)(c,{span:6,className:n().story,children:[(0,l.jsx)("div",{className:n().title,children:"背景故事"}),(0,l.jsxs)(o.Z,{name:"story",initialValues:{个人介绍:e.story.个人介绍,形象描述:e.story.形象描述,宝贵之物:e.story.宝贵之物,重要之人:e.story.重要之人,意义非凡之地:e.story.意义非凡之地,精神状况:e.story.精神状况,思想信念:e.story.思想信念,特质:e.story.特质},autoComplete:"off",onValuesChange:u,children:[(0,l.jsx)(o.Z.Item,{label:"个人介绍",name:"个人介绍",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"形象描述",name:"形象描述",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"宝贵之物",name:"宝贵之物",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"重要之人",name:"重要之人",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"非凡之地",name:"意义非凡之地",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"精神状况",name:"精神状况",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"思想信念",name:"思想信念",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{label:"特质",name:"特质",style:{height:10},children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(o.Z.Item,{wrapperCol:{offset:8,span:16},style:{paddingTop:10},children:(0,l.jsx)(d.ZP,{disabled:!0,type:"primary",htmlType:"submit",onClick:()=>j(e.wxid),children:"更新"})})]})]}),(0,l.jsxs)(c,{span:4,className:n().weapon,children:[(0,l.jsx)("div",{className:n().title,children:"武器"}),(0,l.jsx)(S,{wrap:"wrap",gap:"small",children:Object.keys(e.weapon).map(t=>(0,l.jsxs)("div",{className:n().weapontext,children:[t,": ",e.weapon[t]["伤害"]]},t))}),(0,l.jsx)("div",{className:n().title,style:{paddingTop:32},children:"克苏鲁神话相关"}),(0,l.jsxs)(S,{wrap:"wrap",gap:"small",children:[(0,l.jsxs)("div",{className:n().weapontext,children:["法术: ",e.story.法术]}),(0,l.jsxs)("div",{className:n().weapontext,children:["第三类接触: ",e.story.第三类接触]}),(0,l.jsxs)("div",{className:n().weapontext,children:["魔法物品和典籍: ",e.story.魔法物品和典籍]})]})]}),(0,l.jsxs)(c,{span:4,className:n().item,children:[(0,l.jsx)("div",{className:n().title,children:"随身物品"}),(0,l.jsx)("div",{className:n().weapontext,children:e.item})]})]},t))]})}},2649:function(e,t,a){"use strict";a.d(t,{Y:function(){return l}});let l="/api"},7296:function(e){e.exports={maintitle:"page_maintitle__fEtv1",info:"page_info__GU4DF",name:"page_name__Z35LR",attribute:"page_attribute__HVNQ3",title:"page_title__8KOpM",attributeText:"page_attributeText__x_Jzp",skill:"page_skill__R1oja",skillText:"page_skillText__WM5pA",story:"page_story__eUM_t",weapon:"page_weapon__AZQCo",weapontext:"page_weapontext__64Tuc",item:"page_item__zQw5c"}}},function(e){e.O(0,[740,846,971,69,744],function(){return e(e.s=3666)}),_N_E=e.O()}]);